<html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BMI-Calculator</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
  <style>
    body {
      background-color: #e0d7d7;
      box-sizing: border-box;
    }

    .container {
      background-color: rgb(2, 2, 27);
      box-shadow: 5px 10px 8px 10px #888888;
      color: white;
      width: 40vw;
    }

    .card1 {
      background-color: rgb(19, 19, 39);
      border: 2px solid rgb(19, 19, 39);
      width: fit-content;
    }

    .card1special {
      width: 10vw;
      height: 15vh;
    }
  </style>
</head>

<body>
  <div class="container text-center text-light">
    <div>
      <h2>BMI Calculator</h2>
      <div class="d-flex justify-content-center py-2 border-bottom border-top">
        <div class="card1 m-2 p-2 card1special">
          <i class="mb-3 fs-1 fa-solid fa-mars"></i>
          <p class="fw-bolder">Male</p>
        </div>
        <div class="card1 m-2 p-2 card1special">
          <i class="mb-3 fs-1 fa-solid fa-venus"></i>
          <p class="fw-bolder">Female</p>
        </div>
      </div>
      <div class="card1 m-auto p-4 mb-3 mt-3">
        <p>Height</p>
        <h2 class="mb-4" id="height"><span> ft.</span></h2>
        <div class="d-flex" id="height-control">
          <button type="button" class="me-1 btn btn-danger d-inline">
            <i class="fa-solid fa-sort-down"></i>
          </button>
          <button type="button" class="me-1 btn btn-primary d-inline">
            reset
          </button>
          <button type="button" class="me-1 btn btn-success d-inline">
            <i class="fa-solid fa-sort-up"></i>
          </button>
        </div>
      </div>
      <div class="d-flex justify-content-center mb-3 mt-3 border-bottom border-top py-2">
        <div id="weightcontainer" class="card1 m-2 p-2" style="width: 10vw; height: 22.5vh">
          <p>Weight</p>
          <input id="weightinput" class="w-50 m-auto d-none mb-4 d-block" type="text" />
          <h3 id="weightdisplay" class="mb-4"></h3>
          <button type="button" class="rounded-circle fa fa-minus border border-dark p-2 me-1 down"></button>
          <button type="button" class="rounded-circle fa fa-plus border border-dark p-2 up"></button>
        </div>
        <div id="agecontainer" class="card1 m-2 p-2" style="width: 10vw; height: 22.5vh">
          <p>Age</p>
          <input id="ageinput" class="w-50 m-auto d-none mb-4 d-block" type="text" />
          <h3 id="agedisplay" class="mb-4"><span> Y.</span></h3>
          <button type="button" class="rounded-circle fa fa-minus border border-dark p-2 me-1 down"></button>
          <button type="button" class="rounded-circle fa fa-plus border border-dark p-2 me-1 up"></button>
        </div>
      </div>
      <button id="offcanvas" class="btn btn-primary btn-lg mt-3 mb-4 w-100"
        style="background-color:rgb(255, 70, 101); border:none" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">Calculate Your BMI</button>

      <div class="offcanvas offcanvas-bottom w-50 m-auto" tabindex="-1" id="offcanvasBottom"
        aria-labelledby="offcanvasBottomLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasBottomLabel">Offcanvas bottom</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body small text-dark">
          <h2>Your BMI INDEX IS</h2><br>
          <span class="h3"></span><span class="fs-6 fw-bolder "></span>
        </div>
      </div>
    </div>
  </div>
  <script src="https://kit.fontawesome.com/69ee489e1c.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script>
    function checkvalidity(styles, identifier) {
      if (identifier == "h") {
        if (styles.contains("btn-success") && counter_height <= 8) {
          counter_height = counter_height + 0.1;
        } else if (styles.contains("btn-danger") && counter_height > 4) {
          counter_height = counter_height - 0.1;
        } else {
          counter_height = 5.5;
        }
        height.innerText = counter_height.toPrecision(2) + " ft.";
      }
      if (identifier == "w") {
        if (styles.contains("up") && counter_weight < 130) {
          counter_weight = counter_weight + 1;
        } else if (styles.contains("down") && counter_weight > 10) {
          counter_weight = counter_weight - 1;
        }
        weight.innerText = counter_weight + " Kg.";
      } else {
        if (styles.contains("up") && counter_age < 90) {
          counter_age = counter_age + 1;
        } else if (styles.contains("down") && counter_age > 18) {
          counter_age = counter_age - 1;
        }
        age.innerText = counter_age + " Y.";
      }
    }
    var counter_height = 5.5;
    var counter_weight = 40;
    var counter_age = 18;
    var height = document.getElementById("height");
    var weight = document.getElementById("weightdisplay");
    var age = document.getElementById("agedisplay");
    var bttn_up_down_h = document.querySelectorAll("#height-control > button");
    var bttn_up_down_w = document.querySelectorAll("#weightcontainer > button");
    var bttn_up_down_a = document.querySelectorAll("#agecontainer > button");
    height.innerText = counter_height + " ft.";
    weight.innerText = counter_weight + " Kg.";
    age.innerText = counter_age + " Y.";
    bttn_up_down_h.forEach(function (btn) {
      btn.addEventListener("click", function (e) {
        styles = e.currentTarget.classList;
        checkvalidity(styles, "h");
      });
    });
    bttn_up_down_w.forEach(function (btn) {
      btn.addEventListener("click", function (e) {
        styles = e.currentTarget.classList;
        checkvalidity(styles, "w");
      });
    });
    bttn_up_down_a.forEach(function (btn) {
      btn.addEventListener("click", function (e) {
        styles = e.currentTarget.classList;
        checkvalidity(styles, "a");
      });
    });
    weight.addEventListener("click", function (e) {
      weight.classList.toggle("d-none");
      document.getElementById("weightinput").classList.toggle("d-none");
    });
    document
      .getElementById("weightinput")
      .addEventListener("keyup", function (e) {
        if (e.key == "Enter") {
          weight.classList.toggle("d-none");
          document.getElementById("weightinput").classList.toggle("d-none");
          counter_weight = document.getElementById("weightinput").value
          weight.innerText =
            document.getElementById("weightinput").value + " Kg.";
          console.log(1);
        }
      });
    age.addEventListener("click", function (e) {
      age.classList.toggle("d-none");
      document.getElementById("ageinput").classList.toggle("d-none");
    });
    document
      .getElementById("ageinput")
      .addEventListener("keyup", function (e) {
        if (e.key == "Enter") {
          age.classList.toggle("d-none");
          document.getElementById("ageinput").classList.toggle("d-none");
          counter_age = document.getElementById("ageinput").value
          age.innerText = document.getElementById("ageinput").value + " Kg.";
          console.log(1);
        }
      });
    document.getElementById("offcanvas").addEventListener("click", function () {
      result = counter_weight / ((counter_height * 0.3048) ** 2)
      if (result < 18.5) {
        document.querySelectorAll(".offcanvas-body span")[1].style.color = "red";
        document.querySelectorAll(".offcanvas-body span")[1].textContent = " (which is low)"
      }
      else if (result > 18.5 && result <= 25) {
        document.querySelectorAll(".offcanvas-body span")[1].style.color = "blue";
        document.querySelectorAll(".offcanvas-body span")[1].textContent = " (which is normal)"
      }
      else {
        document.querySelectorAll(".offcanvas-body span")[1].style.color = "red";
        document.querySelectorAll(".offcanvas-body span")[1].textContent = " (which is high)"
      }
      document.querySelectorAll(".offcanvas-body span")[0].textContent = result.toPrecision(4)
      console.log(result);
    })
  </script>
</body>

</html>