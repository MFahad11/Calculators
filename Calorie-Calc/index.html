<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calorie-Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <style>
        body {
            background-color: #2e364c;
            box-sizing: border-box;
        }

        .container1 {
            background-color: rgb(220, 220, 220);
            margin: auto;
            box-shadow: 2px 5px 12px 5px #888888;
            color: white;
            width: 40vw;
        }

        .card1 {
            background-color: rgb(242, 242, 242);
            border: 2px solid rgb(255, 255, 255);
            box-shadow: 2px 5px 12px 5px #888888;
            width: fit-content;
        }

        .card1special {
            width: 10vw;
            height: 15vh;
        }
    </style>
</head>

<body>
    <div class="container1 text-center text-dark">
        <div class="w-100">
            <h2 class="bg-light text-dark border border-dark ">Calorie Calculator</h2>
            <div class="card1 m-auto p-4 mb-3 mt-3">
                <p class="fw-bolder">Height</p>
                <h2 class="mb-4" id="height"><span> ft.</span></h2>
                <div class="d-flex" id="height-control">
                    <button type="button" class="me-1 btn btn-danger d-inline">
                        <i class="fa-solid fa-sort-down"></i>
                    </button>
                    <button type="button" class="me-1 btn btn-primary d-inline">
                        reset
                    </button>
                    <button type="button" class="me-1 btn btn-success d-inline">
                        <i class="fa-solid fa-sort-up"></i>
                    </button>
                </div>
            </div>
            <div class="d-flex justify-content-center mb-3 mt-3  border border-dark border-end-0 border-start-0 py-2">
                <div id="weightcontainer" class="card1 m-2 p-2" style="width: 10vw; height: 22.5vh">
                    <p class="fw-bolder">Weight</p>
                    <input id="weightinput" class="w-50 m-auto d-none mb-4 d-block" type="text" />
                    <h3 id="weightdisplay" class="mb-4"></h3>
                    <button type="button" class="rounded-circle fa fa-minus border border-dark p-2 me-1 down"></button>
                    <button type="button" class="rounded-circle fa fa-plus border border-dark p-2 up"></button>
                </div>
                <div id="agecontainer" class="card1 m-2 p-2" style="width: 10vw; height: 22.5vh">
                    <p class="fw-bolder">Age</p>
                    <input id="ageinput" class="w-50 m-auto d-none mb-4 d-block" type="text" />
                    <h3 id="agedisplay" class="mb-4"><span> Y.</span></h3>
                    <button type="button" class="rounded-circle fa fa-minus border border-dark p-2 me-1 down"></button>
                    <button type="button" class="rounded-circle fa fa-plus border border-dark p-2 me-1 up"></button>
                </div>
            </div>
            <div class="d-flex justify-content-center py-2 border border-dark border-end-0 border-start-0 border-top-0">
                <div class="card1 m-2 p-2 card1special" id="male">
                    <i class="mb-3 fs-1 fa-solid fa-mars"></i>
                    <p class="fw-bolder">Male</p>
                </div>
                <div class="card1 m-2 p-2 card1special" id="female">
                    <i class="mb-3 fs-1 fa-solid fa-venus"></i>
                    <p class="fw-bolder">Female</p>
                </div>
            </div>
            <div class="dropdown  mb-5 mt-4  ">
                <button class="btn btn-primary dropdown-toggle w-50" type="button" id="defaultDropdown"
                    data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                    Your Physical Activity?
                </button>
                <ul class="dropdown-menu w-50" aria-labelledby="defaultDropdown">
                    <li><a class="dropdown-item" href="#">Not too much</a></li>
                    <li><a class="dropdown-item" href="#">Normal</a></li>
                    <li><a class="dropdown-item" href="#">Very Active</a></li>
                </ul>
            </div>
        </div>
        <button id="offcanvas" class="btn btn-primary btn-lg mt-5 w-100"
            style="background-color:rgb(0, 68, 255); border:none" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">Calculate Your Calories</button>

        <div class="offcanvas offcanvas-bottom w-50 m-auto" tabindex="-1" id="offcanvasBottom"
            aria-labelledby="offcanvasBottomLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasBottomLabel"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body small text-dark">
                <h2>Your Calorie intake is</h2><br>
                <span class="h3"></span><span class="fs-6 fw-bolder "> cal/day</span>
            </div>
        </div>
    </div>
    <script src="https://kit.fontawesome.com/69ee489e1c.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        // Function to check limit for counter
        function checkvalidity(styles, identifier) {
            if (identifier == "h") {
                if (styles.contains("btn-success") && counter_height <= 8) {
                    counter_height = counter_height + 0.1;
                } else if (styles.contains("btn-danger") && counter_height > 4) {
                    counter_height = counter_height - 0.1;
                } else {
                    counter_height = 5.5;
                }
                height.innerText = counter_height.toPrecision(2) + " ft.";
            }
            if (identifier == "w") {
                if (styles.contains("up") && counter_weight < 130) {
                    counter_weight = counter_weight + 1;
                } else if (styles.contains("down") && counter_weight > 10) {
                    counter_weight = counter_weight - 1;
                }
                weight.innerText = counter_weight + " Kg.";
            } else {
                if (styles.contains("up") && counter_age < 90) {
                    counter_age = counter_age + 1;
                } else if (styles.contains("down") && counter_age > 18) {
                    counter_age = counter_age - 1;
                }
                age.innerText = counter_age + " Y.";
            }
        }
        // Variables
        var counter_height = 5.5;
        var counter_weight = 40;
        var counter_age = 18;
        var height = document.getElementById("height");
        var weight = document.getElementById("weightdisplay");
        var age = document.getElementById("agedisplay");
        var bttn_up_down_h = document.querySelectorAll("#height-control > button");
        var bttn_up_down_w = document.querySelectorAll("#weightcontainer > button");
        var bttn_up_down_a = document.querySelectorAll("#agecontainer > button");
        height.innerText = counter_height + " ft.";
        weight.innerText = counter_weight + " Kg.";
        age.innerText = counter_age + " Y.";

        //Eventlistener for height
        bttn_up_down_h.forEach(function (btn) {
            btn.addEventListener("click", function (e) {
                styles = e.currentTarget.classList;
                checkvalidity(styles, "h");
            });
        });

        //Eventlistener for weight
        bttn_up_down_w.forEach(function (btn) {
            btn.addEventListener("click", function (e) {
                styles = e.currentTarget.classList;
                checkvalidity(styles, "w");
            });
        });
        
        //Eventlistener for age
        bttn_up_down_a.forEach(function (btn) {
            btn.addEventListener("click", function (e) {
                styles = e.currentTarget.classList;
                checkvalidity(styles, "a");
            });
        });


        weight.addEventListener("click", function (e) {
            weight.classList.toggle("d-none");
            document.getElementById("weightinput").classList.toggle("d-none");
        });
        document
            .getElementById("weightinput")
            .addEventListener("keyup", function (e) {
                if (e.key == "Enter") {
                    weight.classList.toggle("d-none");
                    document.getElementById("weightinput").classList.toggle("d-none");
                    counter_weight = document.getElementById("weightinput").value
                    weight.innerText =
                        document.getElementById("weightinput").value + " Kg.";
                }
            });
        age.addEventListener("click", function (e) {
            age.classList.toggle("d-none");
            document.getElementById("ageinput").classList.toggle("d-none");
        });
        document
            .getElementById("ageinput")
            .addEventListener("keyup", function (e) {
                if (e.key == "Enter") {
                    age.classList.toggle("d-none");
                    document.getElementById("ageinput").classList.toggle("d-none");
                    counter_age = document.getElementById("ageinput").value
                    age.innerText = document.getElementById("ageinput").value + " Kg.";
                }
            });
        document.querySelectorAll(".card1special").forEach(function (e) {
            e.addEventListener("click", function () {
                check_gender = e.children[1].textContent
                if (check_gender == "Male") {
                    bmr = 88.362 + (13.397 * counter_weight) + (4.799 * (counter_height * 30.48)) - (5.677 * counter_age)
                    document.getElementById("male").classList.toggle("border-info")
                }
                else {
                    bmr = 447.593 + (9.247 * counter_weight) + (3.098 * (counter_height * 30.48)) - (4.330 * counter_age)
                    document.getElementById("female").classList.toggle("border-info")
                }

            })
        })
        document.querySelectorAll(".dropdown-item").forEach(function (e) {
            e.addEventListener('click', function () {
                check_text = e.textContent
                if (check_text == "Not too much") {
                    calc = bmr * 1.2
                }
                else if (check_text == "Normal") {
                    calc = bmr * 1.375
                }
                else {
                    calc = bmr * 1.55
                }
            })
        })
        document.getElementById("offcanvas").addEventListener("click", function () {
            document.querySelectorAll(".offcanvas-body span")[0].textContent = calc.toPrecision(4)
        })
    </script>
</body>

</html>